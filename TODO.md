# 🎯 AnimeSorter TODO 리스트

## 📋 **Phase 1: 즉시 구현 가능 (1-2주)**

### 🔧 **오류 처리 및 로깅 시스템**
- [x] **예외 계층 구조 구현**
  - [x] `AnimeSorterError` 베이스 클래스 생성
  - [x] `ConfigError`, `FileCleanerError`, `TMDBApiError` 등 구체적 예외 클래스
  - [x] `src/exceptions/__init__.py` 모듈 생성

- [x] **로깅 시스템 개선**
  - [x] 로테이팅 로그 핸들러 구현 (5MB, 3개 백업)
  - [x] 구조화된 로깅 포맷 설정
  - [x] 로그 레벨별 필터링 기능
  - [x] `src/utils/logger.py` 개선

- [x] **사용자 친화적 오류 메시지**
  - [x] 기술적 오류 → 사용자 메시지 변환 함수
  - [x] 다국어 지원 (한국어/영어)
  - [x] 오류 복구 제안 시스템

- [x] **전역 예외 처리기**
  - [x] `sys.excepthook` 설정
  - [x] 비동기 예외 처리기 구현
  - [x] 크래시 리포트 생성

### ⚡ **성능 최적화**
- [x] **캐싱 시스템 완성**
  - [x] SQLite 기반 영구 캐시 구현
  - [x] 캐시 만료 관리 (30일)
  - [x] 캐시 크기 제한 (10,000 항목)
  - [x] 캐시 정리 스케줄러

- [x] **비동기 I/O 최적화**
  - [x] `aiofiles` 도입
  - [x] 파일 I/O 병렬화
  - [x] API 요청 배치 처리
  - [x] 연결 풀 최적화

- [x] **메모리 최적화**
  - [x] 제너레이터 패턴 도입
  - [x] 대용량 파일 목록 스트리밍 처리
  - [x] 메모리 사용량 모니터링

### 🔒 **보안 강화**
- [x] **API 키 관리 개선**
  - [x] 환경 변수 우선순위 설정
  - [x] 암호화된 설정 파일 지원
  - [x] 키 순환 시스템
  - [x] 키 유효성 검증

- [x] **입력 검증 강화**
  - [x] 파일 경로 검증
  - [x] API 응답 검증
  - [x] 사용자 입력 sanitization
  - [x] SQL 인젝션 방지
  - [x] 고급 경로 보안 검증 (경로 순회 공격 방지)
  - [x] 파일 타입 검증 (매직 바이트 기반)
  - [x] 입력 복잡성 검증
  - [x] 정규식 패턴 검증
  - [x] 배치 검증 기능
  - [x] 검증 결과 캐싱
  - [x] XSS 및 명령어 인젝션 방지
  - [x] 고급 검증 시스템 테스트 완료

---

## 🚀 **Phase 2: 단기 구현 (3-4주)**

### 🎨 **UI/UX 개선**
- [x] **JSON 내보내기 기능**
  - [x] 구조화된 JSON 내보내기
  - [x] 압축 JSON(.gz) 지원
  - [x] 메뉴 기반 내보내기/로드
  - [x] 자동 저장 기능
  - [x] 스캔 결과 요약 정보
- [x] **Import 오류 수정**
  - [x] `time` 모듈 import 누락 수정
  - [x] 애플리케이션 시작 오류 해결
- [x] **파일 정제 테스트 개선**
  - [x] 스캔 결과에서 파일 이름 추출
  - [x] 실제 파일 데이터로 테스트
  - [x] 성능 통계 및 결과 분석
  - [x] 테스트 결과 JSON 저장
- [x] **파일 정제 로직 개선**
  - [x] 연도 정보 제거 로직 추가
  - [x] Doctor Who 특별 케이스 처리
  - [x] 제목 정규화 개선
  - [x] 그룹핑 정확도 향상

- [ ] **드래그 앤 드롭 지원**
  - [ ] 파일 드래그 앤 드롭
  - [ ] 폴더 드래그 앤 드롭
  - [ ] 시각적 피드백

- [ ] **테마 시스템**
  - [ ] 다크 모드 구현
  - [ ] 라이트 모드 개선
  - [ ] 사용자 정의 테마 지원

- [ ] **진행 상황 시각화**
  - [ ] 단계별 진행률 표시
  - [ ] 예상 완료 시간 계산
  - [ ] 실시간 처리 속도 표시
  - [ ] 그래프 기반 통계

- [ ] **키보드 단축키**
  - [ ] Ctrl+O: 폴더 열기
  - [ ] Ctrl+S: 설정 저장
  - [ ] F5: 새로고침
  - [ ] Esc: 작업 취소

- [ ] **설정 대화상자 개선**
  - [ ] 실시간 미리보기
  - [ ] 설정 검증
  - [ ] 설정 백업/복원
  - [ ] 설정 가져오기/내보내기

### 🧪 **테스트 확장**
- [x] **단위 테스트 확장**
  - [x] 모든 모듈 80% 커버리지 달성
  - [x] 엣지 케이스 테스트 추가
  - [x] 성능 테스트 구현
  - [x] 메모리 누수 테스트

- [ ] **통합 테스트**
  - [ ] 전체 파이프라인 테스트
  - [ ] API 연동 테스트
  - [ ] 파일 시스템 테스트
  - [ ] UI 동작 테스트

- [ ] **테스트 자동화**
  - [ ] GitHub Actions 워크플로우
  - [ ] 자동 테스트 실행
  - [ ] 테스트 결과 리포트
  - [ ] 코드 커버리지 리포트

### 🔧 **기능 확장**
- [ ] **다중 메타데이터 소스**
  - [ ] AniDB API 연동
  - [ ] MyAnimeList API 연동
  - [ ] 로컬 메타데이터 파일 지원
  - [ ] 메타데이터 소스 우선순위 설정

- [ ] **고급 분류 옵션**
  - [ ] 사용자 정의 분류 규칙
  - [ ] 스마트 폴더 구조
  - [ ] 태그 기반 분류
  - [ ] 정규식 기반 분류

---

## 🏗️ **Phase 3: 중기 구현 (1-2개월)**

### 🧩 **플러그인 아키텍처**
- [ ] **플러그인 시스템 완성**
  - [ ] 플러그인 로더 구현
  - [ ] 플러그인 인터페이스 정의
  - [ ] 플러그인 의존성 관리
  - [ ] 플러그인 설정 관리

- [ ] **메타데이터 제공자 플러그인**
  - [ ] TMDB 플러그인 개선
  - [ ] AniDB 플러그인
  - [ ] MyAnimeList 플러그인
  - [ ] 로컬 플러그인

- [ ] **분류 규칙 플러그인**
  - [ ] 기본 분류기
  - [ ] 사용자 정의 분류기
  - [ ] 스마트 분류기
  - [ ] 태그 기반 분류기

- [ ] **UI 확장 플러그인**
  - [ ] 설정 패널 플러그인
  - [ ] 통계 패널 플러그인
  - [ ] 도구 패널 플러그인

### 🔄 **CI/CD 파이프라인**
- [ ] **GitHub Actions 설정**
  - [ ] 자동 테스트 실행
  - [ ] 코드 품질 검사
  - [ ] 자동 빌드
  - [ ] 자동 배포

- [ ] **코드 품질 도구**
  - [ ] `black` 코드 포맷팅
  - [ ] `flake8` 린팅
  - [ ] `mypy` 타입 체크
  - [ ] `bandit` 보안 검사

- [ ] **자동화된 배포**
  - [ ] Windows exe 자동 빌드
  - [ ] 릴리즈 노트 자동 생성
  - [ ] GitHub Releases 자동 업로드

### 🌐 **크로스 플랫폼 지원**
- [ ] **macOS 지원**
  - [ ] `.app` 번들 생성
  - [ ] macOS 특화 기능
  - [ ] macOS 테스트

- [ ] **Linux 지원**
  - [ ] AppImage 생성
  - [ ] Linux 패키지 관리
  - [ ] Linux 테스트

- [ ] **Docker 지원**
  - [ ] Dockerfile 작성
  - [ ] Docker Compose 설정
  - [ ] 컨테이너 테스트

---

## 🎯 **Phase 4: 장기 구현 (2-3개월)**

### 🤖 **자동화 기능**
- [ ] **폴더 모니터링**
  - [ ] 파일 시스템 이벤트 감지
  - [ ] 자동 파일 분류
  - [ ] 실시간 알림
  - [ ] 백그라운드 서비스

- [ ] **스케줄링**
  - [ ] 정기적인 파일 정리
  - [ ] 캐시 정리 스케줄
  - [ ] 백업 스케줄
  - [ ] 업데이트 체크

- [ ] **백업 및 복원**
  - [ ] 설정 백업
  - [ ] 캐시 백업
  - [ ] 자동 복원
  - [ ] 버전 관리

### 📊 **고급 기능**
- [ ] **통계 및 분석**
  - [ ] 처리 통계 대시보드
  - [ ] 성능 분석
  - [ ] 사용 패턴 분석
  - [ ] 리포트 생성

- [ ] **배치 처리**
  - [ ] 대용량 파일 처리
  - [ ] 배치 설정
  - [ ] 진행 상황 추적
  - [ ] 오류 복구

- [ ] **네트워크 기능**
  - [ ] 원격 폴더 지원
  - [ ] 클라우드 스토리지 연동
  - [ ] 동기화 기능
  - [ ] 공유 설정

### 🔄 **자동 업데이트**
- [ ] **업데이트 시스템**
  - [ ] 버전 체크
  - [ ] 자동 다운로드
  - [ ] 자동 설치
  - [ ] 롤백 기능

- [ ] **설치 프로그램**
  - [ ] NSIS 기반 설치 프로그램
  - [ ] 포터블 버전
  - [ ] 업데이트 관리자
  - [ ] 제거 프로그램

---

## 📚 **문서화 및 커뮤니티**

### 📖 **문서화**
- [ ] **사용자 가이드**
  - [ ] 설치 가이드
  - [ ] 사용법 튜토리얼
  - [ ] FAQ
  - [ ] 문제 해결 가이드

- [ ] **개발자 문서**
  - [ ] API 문서
  - [ ] 플러그인 개발 가이드
  - [ ] 기여 가이드
  - [ ] 아키텍처 문서

- [ ] **코드 문서화**
  - [ ] 모든 함수/클래스 docstring
  - [ ] 타입 힌트 추가
  - [ ] 주석 개선
  - [ ] README 업데이트

### 🌟 **커뮤니티 구축**
- [ ] **GitHub 설정**
  - [ ] Issues 템플릿
  - [ ] Pull Request 템플릿
  - [ ] Discussions 활성화
  - [ ] Wiki 설정

- [ ] **커뮤니티 채널**
  - [ ] Discord 서버
  - [ ] Reddit 커뮤니티
  - [ ] 블로그/뉴스레터
  - [ ] 사용자 피드백 시스템

---

## 🎯 **우선순위 매트릭스**

| 우선순위 | 구현 난이도 | 사용자 영향도 | 개발 시간 |
|---------|------------|-------------|----------|
| 🔴 **높음** | 오류 처리, 성능 최적화, 보안 | 매우 높음 | 2-4주 |
| 🟡 **중간** | UI/UX 개선, 테스트 확장 | 높음 | 4-8주 |
| 🟢 **낮음** | 플러그인, 자동화 | 중간 | 8-16주 |

---

## 📅 **예상 일정**

- **Phase 1**: 2024년 1-2월
- **Phase 2**: 2024년 3-4월  
- **Phase 3**: 2024년 5-6월
- **Phase 4**: 2024년 7-9월

---

## 🎉 **완료 체크리스트**

각 Phase 완료 시 확인할 사항:

- [ ] 모든 TODO 항목 완료
- [ ] 테스트 통과 (80% 이상 커버리지)
- [ ] 문서 업데이트
- [ ] 사용자 테스트 완료
- [ ] 성능 테스트 통과
- [ ] 보안 검사 통과
- [ ] 릴리즈 노트 작성
- [ ] GitHub 릴리즈 생성

---

## 🎉 **Phase 1 완료 요약 (2024년 1월)**

### ✅ **완성된 주요 기능들:**

#### 🔧 **오류 처리 및 로깅 시스템** (100% 완성)
- ✅ **예외 계층 구조**: `AnimeSorterError` 베이스 클래스와 8개의 구체적 예외 클래스
- ✅ **로깅 시스템**: 로테이팅 핸들러, 구조화된 포맷, 레벨별 필터링
- ✅ **사용자 친화적 오류 메시지**: 다국어 지원, 오류 복구 제안
- ✅ **전역 예외 처리기**: 크래시 리포트 생성, 비동기 예외 처리

#### ⚡ **성능 최적화** (100% 완성)
- ✅ **SQLite 기반 캐시**: 영구 캐시, 만료 관리, 크기 제한, 정리 스케줄러
- ✅ **비동기 I/O 최적화**: `aiofiles` 도입, 파일 I/O 병렬화, API 요청 배치 처리, 연결 풀 최적화
- ✅ **메모리 최적화**: 제너레이터 패턴 도입, 대용량 파일 목록 스트리밍 처리, 메모리 사용량 모니터링

#### 🔒 **보안 강화** (API 키 관리 완성)
- ✅ **API 키 암호화**: 환경 변수 우선, 암호화 저장, 키 순환, 유효성 검증

#### 🧪 **테스트 확장** (단위 테스트 완성)
- ✅ **포괄적인 테스트**: 모든 모듈에 대한 단위 테스트, 엣지 케이스, 성능 테스트

### 📊 **전체 진행률:**
- **Phase 1**: 100% 완성 ✅ (모든 핵심 기능 완성)
- **Phase 2**: 0% 완성 (다음 단계)
- **Phase 3**: 0% 완성 (중기 계획)
- **Phase 4**: 0% 완성 (장기 계획)

### 🎯 **다음 우선순위:**
1. **입력 검증 강화** (Phase 1 마무리)
2. **UI/UX 개선** (Phase 2 시작)
3. **플러그인 시스템** (Phase 2)
4. **고급 기능** (Phase 3)

### 📈 **성능 최적화 벤치마크 결과 (2024년 1월):**
- **API 배치 처리**: 76.7% 성능 향상 (4.488초 → 1.044초)
- **파일명 정제**: 49,719 파일/초 처리 속도
- **캐시 시스템**: 8,193 쿼리/초 처리 속도
- **전체 성능**: 예상보다 훨씬 빠른 성능 달성 ✅

---

*마지막 업데이트: 2024년 1월*
*담당자: 개발팀* 