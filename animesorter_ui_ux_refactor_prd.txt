# AnimeSorter UI/UX 개편 PRD (GUI 전용)

> 버전: v1.0
> 목적: “로그 중심·분산된 조작” 레이아웃을 **작업 흐름 중심·문제 우선** UI로 개편한다.
> 제약: **오로지 GUI만 변경**. 데이터 모델, 스캔/정리 로직, 로깅/파일 I/O는 변경하지 않는다.

---

## 0. 목표

* 핵심 작업 흐름을 **소스 선택 → 스캔 → 미리보기 → 실행** 단계로 명확화.
* 문제 항목(미매칭/충돌/중복)의 **가시성**과 **탐색 효율** 향상.
* 로그는 참조 수준으로 격하(위치만 조정), 본작업 정보에 **화면 실 estate** 우선 배분.

---

## 1. 범위 / 비범위

### 1.1 범위(Scopes)

* 상단 툴바(스캔/미리보기/정리 실행) 재배치 및 검색·진행률 표시.
* 좌측 패널의 **Dock**화(접힘 가능) 및 배치만 조정.
* 중앙 결과 영역을 **탭 + 마스터–디테일** 구조로 재편.
* 하단 로그를 **Bottom Dock**으로 이동(기본 접힘). *로그 내용/발생 로직 변경 금지.*
* 뷰 레벨 필터/정렬(검색·상태 탭용) 및 **셀 표현용 Delegate** 추가. *데이터는 기존 Display 값 사용.*
* 레이아웃·간격·타이포·테마 호환 개선, 단축키/포커스 흐름 정비.
* 창/도크/컬럼/스플리터 상태의 **UI 상태 저장·복원**(QSettings). *키 충돌 없도록 신규 네임스페이스 사용.*

### 1.2 비범위(Non-Goals)

* 데이터 모델/알고리즘/스레딩/파일 작업/로깅 포맷 변경.
* 새 데이터 필드 추가, 스키마/설정 구조 변경.
* Undo/Redo, 배치 전략, 성능 최적화(로직)

---

## 2. 사용자 시나리오(요약)

1. 경로/프로필을 선택하고 **스캔**한다.
2. 상단 요약 배지로 상태 분포를 보고, 기본 활성 탭 **미매칭**에서 우선 검토.
3. 그룹을 클릭하면 하단 디테일에서 포스터/에피소드/변경안을 확인.
4. **미리보기**로 일괄 변경 내역을 확인 후 **정리 실행**.

---

## 3. 정보 구조 & 레이아웃(IA)

```
┌───────────────────── Toolbar ─────────────────────┐
│ [스캔] [미리보기] [정리 실행]  |  검색…  |  진행률 | 요약 │
└───────────────────────────────────────────────────┘
┌── Left Dock(접힘) ─┬────────── Central ──────────┬─(옵션 Right Dock)─┐
│ 경로/프로필/옵션    │ Tabs: 전체/미매칭/충돌/중복/완료               │ │
│                     │ ┌ Master: 그룹 테이블(정렬/필터) ────────────┐ │ │
│                     │ └ Detail: 선택 그룹 상세(포스터/에피소드) ───┘ │ │
└─────────────────────┴──────────────────────────────────────────────┴────┘
┌────────────── Bottom Dock: 로그(기본 접힘, 표시만 변경) ─────────────┐
└─────────────────────────────────────────────────────────────────────┘
```

---

## 4. 화면/컴포넌트 사양

### 4.1 Toolbar(상단)

* 좌→우: **스캔 / 미리보기 / 정리 실행(강조)**, 우측: **검색(QLineEdit)**, 필요 시 **진행률(QProgressBar)**, **상태 요약 배지**(예: `총177 | 미매칭16 | 충돌12 | 중복3`).
* 단축키: `F5 스캔`, `Space 미리보기`, `Ctrl+Enter 정리 실행`, `Ctrl+F 검색`.
* 패딩 12px, 요소 간격 8px, 버튼 높이 28\~32px.

### 4.2 Left Dock(좌측)

* 기존 좌패널 위젯을 **QDockWidget** 컨테이너에 탑재(내용·동작 동일).
* 기본 너비 280px(최소 220px), 닫힘/도킹 위치 변경 허용.

### 4.3 Results Tabs + Master–Detail(중앙)

* **탭**: `전체 / 미매칭 / 충돌 / 중복 / 완료`

  * 동일 데이터 소스를 **뷰 레벨 필터**로 상태별 표기. 기본 탭은 **미매칭**.
* **마스터(상단 테이블)**: 기존 그룹 리스트 모델/뷰 재사용.

  * 정렬 가능, 선택은 행 단위. 헤더 우측에 인라인 검색/필터(선택) 표시 가능.
* **디테일(하단)**: 선택 그룹의 포스터, 개요, 에피소드 테이블(기존 뷰) 배치.

  * 스플리터로 높이 조정, 최소 200px.

### 4.4 Log Dock(하단)

* 기존 로그 위젯을 **Bottom Dock**으로 이동.
* 기본 **숨김(접힘)**, 사용자가 열면 마지막 위치/높이 유지.
* 로그 **내용/레벨/발생 로직은 변경하지 않음**.

### 4.5 셀 표현 Delegate(표현만, 데이터 불변)

* **상태 칩**: 완료/미매칭/충돌/중복을 칩 형태로 배경색+텍스트 중앙정렬.
* **신뢰도 막대(있을 때만)**: 0\~100 얇은 막대 + 가운데 텍스트. 값 없으면 텍스트만.
* **미리보기 텍스트**: `원본명 → 새이름` 등 변경 요약 문자열을 단순 표시.

---

## 5. 상호작용 규칙

* **탭 전환**: 해당 상태로 필터링된 목록만 표시(뷰 레벨 필터).
* **검색**: 현재 탭의 마스터 테이블만 실시간 필터링(대소문자 무시, 부분일치).
* **선택 연동**: 마스터 선택 변경 시 디테일 영역 즉시 갱신.
* **상태 저장**: 창 크기/위치, 도크 배치, 탭, 컬럼 폭, 스플리터 비율, 검색어를 QSettings로 저장·복원.

---

## 6. 시각/레이아웃 가이드

* 8px 그리드(패딩/간격), 표 헤더 Bold.
* 시스템 폰트/테마 자동 추종(라이트·다크).
* 아이콘 세트 일관(Fluent/Material 중 택1).
* 행 높이 28px(+DPI 스케일).
* Empty State: 데이터 없을 때 “소스 선택 후 스캔” 안내 CTA.

---

## 7. 품질 기준(뷰 관점)

* 탭 전환/검색 반응 ≤ 100ms(3만 행 이하 기준, 로컬 테스트).
* 스크롤/정렬 시 깜빡임·프리즈 없음.
* 도크 열고 닫기 시 레이아웃 파손/재배치 지연 없이 자연스러움.

---

## 8. 국제화·접근성

* 신규 문자열은 리소스 테이블 분리(한/영).
* 주요 버튼/테이블에 `accessibleName` 설정, 키보드 포커스 순서 검토.

---

## 9. 리스크/대응

* **고정 레이아웃 가정 코드**: 도크 전환으로 레이아웃 트리 변경 시 위젯 포인터 확인 → 동일 객체를 래핑해 삽입, 시그널/슬롯 유지.
* **상태/신뢰도 데이터가 텍스트만 존재**: 필터는 텍스트 기반 부분일치로 처리(정규식 지원).
* **다크 테마 대비**: 칩/게이지 색상 대비율 최소 4.5:1 확인.

---

## 10. 마이그레이션 전략(뷰 전용)

1. 기존 레이아웃 `UI v1` 유지, 신규 레이아웃 `UI v2`를 설정에서 토글.
2. 기본값을 `UI v2`로 전환하되 문제 시 `UI v1`로 즉시 롤백 가능.
3. UI 상태(QSettings)는 신규 키로 저장(충돌 방지).

---

## 11. 수용 기준(Acceptance Criteria)

* 툴바에 **스캔/미리보기/정리 실행** 버튼이 좌→우 배치되며 기존 동작 그대로 연결됨.
* 좌측 패널이 **Dock**으로 접힘/전개 가능하고 기존 위젯·동작이 동일함.
* 중앙 결과가 **탭 5종**으로 분리되고, 탭 전환 시 해당 상태만 목록에 표시됨(백엔드 변경 없음).
* 그룹 선택 시 하단 디테일이 즉시 갱신되어 포스터/에피소드가 보임.
* 로그가 **Bottom Dock**에서 동일 내용으로 출력되며 기본은 접힘.
* 검색 입력 시 현재 탭 목록만 실시간 필터링됨.
* 앱 재실행 시 창/도크/컬럼/스플리터/탭/검색어가 복원됨.
* 라이트/다크 테마에서 시각적 파손이 없음.

---

## 12. 산출물

* 새 레이아웃 코드(툴바/도크/탭/스플리터 배치) 및 스타일 가이드.
* 탭용 뷰 필터(프록시)와 셀 표현 Delegate(상태 칩/신뢰도/미리보기) 클래스.
* 단축키/도움말 업데이트, QA 체크리스트.

---

## 13. 일정/마일스톤(제안)

* **M1(1주차)**: Toolbar/Left Dock/Log Dock 배치 전환, 상태 저장·복원.
* **M2(2주차)**: Results Tabs + Master–Detail 완성, 검색/필터 연동.
* **M3(3주차)**: Delegate 적용, 다크/라이트 테마/접근성/QA 통과.
* **Gate**: 수용 기준 전항목 통과 시 병합.

---

## 14. QA 체크리스트(발췌)

* [ ] 스캔/미리보기/정리 실행 버튼 클릭·단축키 동작 동일.
* [ ] Dock 상태(열기/닫기/재배치) 재실행 후 복원.
* [ ] 탭별 필터 정확(미매칭/충돌/중복/완료).
* [ ] 검색 실시간 동작, 다른 탭으로 전환 시 필터 상태 유지.
* [ ] 대용량(수천\~수만 행)에서도 스크롤·정렬/탭 전환 지연 없음.
* [ ] 상태 칩/게이지 텍스트 가독성(다크/라이트) 충족.
* [ ] 로그 도크가 기본 접힘이며 내용은 기존과 동일.
* [ ] 빈 상태 메시지와 CTA 노출.
