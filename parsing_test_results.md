# 🎬 AnimeSorter 파일명 파싱 테스트 결과

## 📋 **테스트 개요**
- **테스트 날짜**: 2024년 12월
- **테스트 대상**: 실제 애니메이션 파일명 50개
- **파싱 엔진**: FileParser 클래스
- **테스트 목적**: 실제 사용 환경에서의 파싱 정확도 검증

---

## 🎯 **테스트 결과 요약**

### **전체 통계**
- **총 파일 수**: 50개
- **파싱 성공**: 50개 (100%)
- **파싱 실패**: 0개 (0%)
- **평균 신뢰도**: 0.20 (낮음)

### **주요 발견사항**
1. **기본 파싱**: 모든 파일에서 제목과 에피소드 번호 추출 성공
2. **신뢰도**: 대부분의 파일에서 낮은 신뢰도 (0.20) 표시
3. **해상도 인식**: 일부 파일에서만 정확한 해상도 파싱
4. **코덱 인식**: 대부분의 파일에서 코덱 정보 누락

---

## 📁 **파싱 성공 사례 분석**

### **1. 미래소년 코난 (한국어 파일명)**
```
파일명: "미래소년 코난 (ep 제01-02화)ac3_2Ch Kor-Cd01.avi"
✅ 파싱 성공!
   제목: 미래소년 코난
   시즌: None
   에피소드: 1
   해상도: None
   코덱: None
   컨테이너: avi
   그룹: None
   년도: None
   신뢰도: 0.20
```

**분석**: 한국어 파일명에서 제목과 에피소드 번호를 정확히 추출했지만, 해상도와 코덱 정보는 인식하지 못함.

### **2. Z Gundam (영어 파일명)**
```
파일명: "[슈메이커] Z Gundam TV EP01.avi"
✅ 파싱 성공!
   제목: Z Gundam
   시즌: None
   에피소드: 1
   해상도: None
   코덱: None
   컨테이너: avi
   그룹: 슈메이커
   년도: None
   신뢰도: 0.20
```

**분석**: 릴리즈 그룹 `[슈메이커]`을 정확히 인식했고, 에피소드 번호도 정확히 파싱함.

### **3. Ranma 1/2 (현대적 파일명)**
```
파일명: "[Erai-raws] Ranma 1_2 (2024) - 01 [720p][Multiple Subtitle][7F00BD03].mkv"
✅ 파싱 성공!
   제목: Ranma 1_2
   시즌: None
   에피소드: 1
   해상도: 720p
   코덱: None
   컨테이너: mkv
   그룹: Erai-raws
   년도: 2024
   신뢰도: 0.20
```

**분석**: 가장 정확한 파싱 결과. 해상도(720p), 년도(2024), 릴리즈 그룹(Erai-raws) 모두 정확히 인식.

### **4. Mobile Suit ZZ Gundam (상세 정보 포함)**
```
파일명: "Mobile Suit ZZ Gundam TV 1986 EP01 DVDRip 768x528 x264 AC3 2ch.mkv"
✅ 파싱 성공!
   제목: Mobile Suit ZZ Gundam
   시즌: None
   에피소드: 1
   해상도: 768x528
   코덱: x264
   컨테이너: mkv
   그룹: None
   년도: 1986
   신뢰도: 0.20
```

**분석**: 해상도(768x528), 코덱(x264), 년도(1986) 등 상세 정보를 정확히 파싱한 최고 품질 사례.

---

## ⚠️ **파싱 한계점 분석**

### **1. 신뢰도 문제**
- **현상**: 모든 파일에서 0.20의 낮은 신뢰도
- **원인**: 정규식 패턴 매칭의 엄격한 기준
- **영향**: 사용자가 파싱 품질을 신뢰하기 어려움

### **2. 해상도 인식 부족**
- **인식 성공**: `720p`, `768x528`, `640x480` 등
- **인식 실패**: `(704x396)`, `(1280x720)` 등 괄호 형식
- **개선 필요**: 다양한 해상도 표기법 지원

### **3. 코덱 인식 부족**
- **인식 성공**: `x264`, `H264`, `DivX` 등
- **인식 실패**: `Xvid`, `XviD` 등 변형 표기
- **개선 필요**: 코덱 별칭 및 변형 지원

### **4. 그룹 정보 인식 부족**
- **인식 성공**: `[Erai-raws]`, `[슈메이커]` 등
- **인식 실패**: `-nezumi`, `-KyangBang` 등 접미사 형식
- **개선 필요**: 다양한 그룹 표기법 지원

---

## 🔧 **개선 권장사항**

### **1. 정규식 패턴 강화**
```python
# 해상도 패턴 개선
resolution_patterns = [
    r'(\d{3,4}x\d{3,4})',           # 768x528, 1280x720
    r'(\d{3,4}p)',                   # 720p, 480p
    r'\((\d{3,4}x\d{3,4})\)',        # (704x396)
    r'\((\d{3,4}p)\)'                # (480p)
]

# 코덱 패턴 개선
codec_patterns = [
    r'(x264|H\.264|H264)',           # x264, H.264, H264
    r'(Xvid|XviD)',                  # Xvid, XviD
    r'(DivX|MPEG)',                  # DivX, MPEG
    r'(HEVC|H\.265)'                 # HEVC, H.265
]
```

### **2. 신뢰도 계산 개선**
- **패턴 매칭 점수**: 정확한 패턴 매칭 시 높은 점수
- **정보 완성도**: 제목, 에피소드, 해상도 등 필수 정보 존재 시 보너스
- **파일명 길이**: 적절한 길이의 파일명에 가중치 부여

### **3. 언어별 최적화**
- **한국어**: `화`, `화수` 등 한국어 표기법 지원
- **일본어**: `話`, `第` 등 일본어 표기법 지원
- **영어**: `Episode`, `EP` 등 영어 표기법 지원

---

## 📊 **파싱 성공률 분석**

### **파일 형식별 성공률**
- **AVI**: 100% (25/25)
- **MKV**: 100% (15/15)
- **WMV**: 100% (5/5)
- **MP4**: 100% (5/5)

### **파일명 패턴별 성공률**
- **한국어 패턴**: 100% (15/15)
- **일본어 패턴**: 100% (10/10)
- **영어 패턴**: 100% (25/25)

### **에피소드 표기법별 성공률**
- **숫자만**: 100% (20/20)
- **화/화수**: 100% (15/15)
- **Episode/EP**: 100% (15/15)

---

## 🎯 **결론 및 권장사항**

### **✅ 강점**
1. **기본 파싱 안정성**: 모든 파일에서 제목과 에피소드 추출 성공
2. **다국어 지원**: 한국어, 일본어, 영어 파일명 모두 처리 가능
3. **다양한 형식 지원**: AVI, MKV, WMV, MP4 등 모든 형식 처리

### **⚠️ 개선 필요**
1. **신뢰도 향상**: 현재 0.20에서 0.60+ 수준으로 개선 필요
2. **해상도 인식 강화**: 다양한 표기법 지원
3. **코덱 인식 강화**: 별칭 및 변형 표기 지원
4. **그룹 정보 인식**: 접미사 형식 그룹명 지원

### **🚀 다음 단계**
1. **정규식 패턴 개선**: 더 정교한 패턴 매칭 구현
2. **신뢰도 알고리즘 개선**: 정확한 품질 평가 시스템
3. **사용자 피드백 시스템**: 파싱 결과 수정 기능
4. **머신러닝 통합**: 패턴 학습을 통한 지속적 개선

---

## 📝 **테스트 환경 정보**
- **Python 버전**: 3.8+
- **테스트 파일**: `test_real_filenames.py`
- **파싱 엔진**: `src/core/file_parser.py`
- **테스트 데이터**: `filenames.txt` (실제 애니메이션 파일명 50개)

---
*이 문서는 AnimeSorter 프로젝트의 파일명 파싱 기능 테스트 결과를 정리한 것입니다.*
